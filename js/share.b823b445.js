(window.webpackJsonp=window.webpackJsonp||[]).push([["share"],{"0d3b":function(e,t,n){var o=n("d039"),r=n("b622"),i=n("c430"),a=r("iterator");e.exports=!o((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,o){t.delete("b"),n+=o+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},"25ac":function(e,t,n){},"2b3d":function(e,t,n){"use strict";function o(e,t){var n,o,r;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(n=Y(t.slice(1,-1)))?void(e.host=n):B;if(oe(e))return t=_(t),W.test(t)||null===(n=Z(t))?B:void(e.host=n);if(J.test(t))return B;for(n="",o=O(t),r=0;r<o.length;r++)n+=te(o[r],G);e.host=n}function r(e){var t,n,o,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=U(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",o=function(e){for(var t=null,n=1,o=null,r=0,i=0;i<8;i++)0!==e[i]?(n<r&&(t=o,n=r),o=null,r=0):(null===o&&(o=i),++r);return n<r&&(t=o,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r=r&&!1,o===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}function i(e){return""!=e.username||""!=e.password}function a(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function l(e,t){return 2==e.length&&T.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)}function c(e){var t;return 1<e.length&&l(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)}function s(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&l(t[0],!0)||t.pop()}function u(e,t,n,r){var a,u,h,f=n||re,p=0,v="",b=!1,g=!1,m=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace($,"")),t=t.replace(X,""),a=O(t);p<=a.length;){switch(u=a[p],f){case re:if(!u||!T.test(u)){if(n)return P;f=ae;continue}v+=u.toLowerCase(),f=ie;break;case ie:if(u&&(q.test(u)||"+"==u||"-"==u||"."==u))v+=u.toLowerCase();else{if(":"!=u){if(n)return P;v="",f=ae,p=0;continue}if(n&&(oe(e)!=j(ne,v)||"file"==v&&(i(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=v,n)return void(oe(e)&&ne[e.scheme]==e.port&&(e.port=null));v="","file"==e.scheme?f=ge:oe(e)&&r&&r.scheme==e.scheme?f=le:oe(e)?f=de:"/"==a[p+1]?(f=ce,p++):(e.cannotBeABaseURL=!0,e.path.push(""),f=ke)}break;case ae:if(!r||r.cannotBeABaseURL&&"#"!=u)return P;if(r.cannotBeABaseURL&&"#"==u){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,f=xe;break}f="file"==r.scheme?ge:se;continue;case le:if("/"!=u||"/"!=a[p+1]){f=se;continue}f=he,p++;break;case ce:if("/"==u){f=fe;break}f=je;continue;case se:if(e.scheme=r.scheme,u==d)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==u||"\\"==u&&oe(e))f=ue;else if("?"==u)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",f=Oe;else{if("#"!=u){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),f=je;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",f=xe}break;case ue:if(!oe(e)||"/"!=u&&"\\"!=u){if("/"!=u){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,f=je;continue}f=fe}else f=he;break;case de:if(f=he,"/"!=u||"/"!=v.charAt(p+1))continue;p++;break;case he:if("/"==u||"\\"==u)break;f=fe;continue;case fe:if("@"==u){b&&(v="%40"+v);b=!0;for(var w=O(v),y=0;y<w.length;y++){var k=w[y];":"!=k||m?(k=te(k,ee),m?e.password+=k:e.username+=k):m=!0}v=""}else if(u==d||"/"==u||"?"==u||"#"==u||"\\"==u&&oe(e)){if(b&&""==v)return"Invalid authority";p-=O(v).length+1,v="",f=pe}else v+=u;break;case pe:case ve:if(n&&"file"==e.scheme){f=we;continue}if(":"!=u||g){if(u==d||"/"==u||"?"==u||"#"==u||"\\"==u&&oe(e)){if(oe(e)&&""==v)return B;if(n&&""==v&&(i(e)||null!==e.port))return;if(h=o(e,v))return h;if(v="",f=ye,n)return;continue}"["==u?g=!0:"]"==u&&(g=!1),v+=u}else{if(""==v)return B;if(h=o(e,v))return h;if(v="",f=be,n==ve)return}break;case be:if(!I.test(u)){if(u==d||"/"==u||"?"==u||"#"==u||"\\"==u&&oe(e)||n){if(""!=v){var x=parseInt(v,10);if(65535<x)return E;e.port=oe(e)&&x===ne[e.scheme]?null:x,v=""}if(n)return;f=ye;continue}return E}v+=u;break;case ge:if(e.scheme="file","/"==u||"\\"==u)f=me;else{if(!r||"file"!=r.scheme){f=je;continue}if(u==d)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==u)e.host=r.host,e.path=r.path.slice(),e.query="",f=Oe;else{if("#"!=u){c(a.slice(p).join(""))||(e.host=r.host,e.path=r.path.slice(),s(e)),f=je;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",f=xe}}break;case me:if("/"==u||"\\"==u){f=we;break}r&&"file"==r.scheme&&!c(a.slice(p).join(""))&&(l(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),f=je;continue;case we:if(u==d||"/"==u||"\\"==u||"?"==u||"#"==u){if(!n&&l(v))f=je;else if(""==v){if(e.host="",n)return;f=ye}else{if(h=o(e,v))return h;if("localhost"==e.host&&(e.host=""),n)return;v="",f=ye}continue}v+=u;break;case ye:if(oe(e)){if(f=je,"/"!=u&&"\\"!=u)continue}else if(n||"?"!=u)if(n||"#"!=u){if(u!=d&&(f=je,"/"!=u))continue}else e.fragment="",f=xe;else e.query="",f=Oe;break;case je:if(u==d||"/"==u||"\\"==u&&oe(e)||!n&&("?"==u||"#"==u)){if(".."===(x=(x=v).toLowerCase())||"%2e."===x||".%2e"===x||"%2e%2e"===x?(s(e),"/"==u||"\\"==u&&oe(e)||e.path.push("")):"."===(x=v)||"%2e"===x.toLowerCase()?"/"==u||"\\"==u&&oe(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&l(v)&&(e.host&&(e.host=""),v=v.charAt(0)+":"),e.path.push(v)),v="","file"==e.scheme&&(u==d||"?"==u||"#"==u))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==u?(e.query="",f=Oe):"#"==u&&(e.fragment="",f=xe)}else v+=te(u,Q);break;case ke:"?"==u?(e.query="",f=Oe):"#"==u?(e.fragment="",f=xe):u!=d&&(e.path[0]+=te(u,G));break;case Oe:n||"#"!=u?u!=d&&("'"==u&&oe(e)?e.query+="%27":e.query+="#"==u?"%23":te(u,G)):(e.fragment="",f=xe);break;case xe:u!=d&&(e.fragment+=te(u,K))}p++}}n("3ca3");var d,h,f,p=n("23e7"),v=n("83ab"),b=n("0d3b"),g=n("da84"),m=n("37e8"),w=n("6eeb"),y=n("19aa"),j=n("5135"),k=n("60da"),O=n("4df4"),x=n("6547").codeAt,_=n("5fb2"),V=n("d44e"),N=n("9861"),S=(n=n("69f3"),g.URL),R=N.URLSearchParams,C=N.getState,z=n.set,L=n.getterFor("URL"),U=Math.floor,A=Math.pow,P="Invalid scheme",B="Invalid host",E="Invalid port",T=/[A-Za-z]/,q=/[\d+-.A-Za-z]/,I=/\d/,F=/^(0x|0X)/,H=/^[0-7]+$/,M=/^\d+$/,D=/^[\dA-Fa-f]+$/,W=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,J=/[\u0000\t\u000A\u000D #/:?@[\\]]/,$=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,X=/[\t\u000A\u000D]/g,Z=function(e){var t,n,o,r,i,a,l,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),4<(t=c.length))return e;for(n=[],o=0;o<t;o++){if(""==(r=c[o]))return e;if(i=10,1<r.length&&"0"==r.charAt(0)&&(i=F.test(r)?16:8,r=r.slice(8==i?1:2)),""===r)a=0;else{if(!(10==i?M:8==i?H:D).test(r))return e;a=parseInt(r,i)}n.push(a)}for(o=0;o<t;o++)if(a=n[o],o==t-1){if(a>=A(256,5-t))return null}else if(255<a)return null;for(l=n.pop(),o=0;o<n.length;o++)l+=n[o]*A(256,3-o);return l},Y=function(e){function t(){return e.charAt(h)}var n,o,r,i,a,l,c,s=[0,0,0,0,0,0,0,0],u=0,d=null,h=0;if(":"==t()){if(":"!=e.charAt(1))return;h+=2,d=++u}for(;t();){if(8==u)return;if(":"!=t()){for(n=o=0;o<4&&D.test(t());)n=16*n+parseInt(t(),16),h++,o++;if("."==t()){if(0==o)return;if(h-=o,6<u)return;for(r=0;t();){if(i=null,0<r){if(!("."==t()&&r<4))return;h++}if(!I.test(t()))return;for(;I.test(t());){if(a=parseInt(t(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(255<i)return;h++}s[u]=256*s[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==t()){if(h++,!t())return}else if(t())return;s[u++]=n}else{if(null!==d)return;h++,d=++u}}if(null!==d)for(l=u-d,u=7;0!=u&&0<l;)c=s[u],s[u--]=s[d+l-1],s[d+--l]=c;else if(8!=u)return;return s},G={},K=k({},G,{" ":1,'"':1,"<":1,">":1,"`":1}),Q=k({},K,{"#":1,"?":1,"{":1,"}":1}),ee=k({},Q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),te=function(e,t){var n=x(e,0);return 32<n&&n<127&&!j(t,e)?e:encodeURIComponent(e)},ne={ftp:21,file:null,http:80,https:443,ws:80,wss:443},oe=function(e){return j(ne,e.scheme)},re={},ie={},ae={},le={},ce={},se={},ue={},de={},he={},fe={},pe={},ve={},be={},ge={},me={},we={},ye={},je={},ke={},Oe={},xe={},_e=function(e){var t,n=y(this,_e,"URL"),o=1<arguments.length?arguments[1]:void 0,r=(e=String(e),z(n,{type:"URL"}));if(void 0!==o)if(o instanceof _e)t=L(o);else if(a=u(t={},String(o)))throw TypeError(a);if(a=u(r,e,null,t))throw TypeError(a);var i=r.searchParams=new R,a=C(i);a.updateSearchParams(r.query),a.updateURL=function(){r.query=String(i)||null},v||(n.href=Ve.call(n),n.origin=Ne.call(n),n.protocol=Se.call(n),n.username=Re.call(n),n.password=Ce.call(n),n.host=ze.call(n),n.hostname=Le.call(n),n.port=Ue.call(n),n.pathname=Ae.call(n),n.search=Pe.call(n),n.searchParams=Be.call(n),n.hash=Ee.call(n))},Ve=(n=_e.prototype,function(){var e=L(this),t=e.scheme,n=e.username,o=e.password,a=e.host,l=e.port,c=e.path,s=e.query,u=e.fragment,d=t+":";return null!==a?(d+="//",i(e)&&(d+=n+(o?":"+o:"")+"@"),d+=r(a),null!==l&&(d+=":"+l)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?c[0]:c.length?"/"+c.join("/"):"",null!==s&&(d+="?"+s),null!==u&&(d+="#"+u),d}),Ne=function(){var e=L(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&oe(e)?t+"://"+r(e.host)+(null!==n?":"+n:""):"null"},Se=function(){return L(this).scheme+":"},Re=function(){return L(this).username},Ce=function(){return L(this).password},ze=function(){var e=L(this),t=e.host;e=e.port;return null===t?"":null===e?r(t):r(t)+":"+e},Le=function(){var e=L(this).host;return null===e?"":r(e)},Ue=function(){var e=L(this).port;return null===e?"":String(e)},Ae=function(){var e=L(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Pe=function(){var e=L(this).query;return e?"?"+e:""},Be=function(){return L(this).searchParams},Ee=function(){var e=L(this).fragment;return e?"#"+e:""};k=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};v&&m(n,{href:k(Ve,(function(e){var t=L(this);e=String(e),e=u(t,e);if(e)throw TypeError(e);C(t.searchParams).updateSearchParams(t.query)})),origin:k(Ne),protocol:k(Se,(function(e){var t=L(this);u(t,String(e)+":",re)})),username:k(Re,(function(e){var t=L(this),n=O(String(e));if(!a(t)){t.username="";for(var o=0;o<n.length;o++)t.username+=te(n[o],ee)}})),password:k(Ce,(function(e){var t=L(this),n=O(String(e));if(!a(t)){t.password="";for(var o=0;o<n.length;o++)t.password+=te(n[o],ee)}})),host:k(ze,(function(e){var t=L(this);t.cannotBeABaseURL||u(t,String(e),pe)})),hostname:k(Le,(function(e){var t=L(this);t.cannotBeABaseURL||u(t,String(e),ve)})),port:k(Ue,(function(e){var t=L(this);a(t)||(""==(e=String(e))?t.port=null:u(t,e,be))})),pathname:k(Ae,(function(e){var t=L(this);t.cannotBeABaseURL||(t.path=[],u(t,e+"",ye))})),search:k(Pe,(function(e){var t=L(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",u(t,e,Oe)),C(t.searchParams).updateSearchParams(t.query)})),searchParams:k(Be),hash:k(Ee,(function(e){var t=L(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",u(t,e,xe)):t.fragment=null}))}),w(n,"toJSON",(function(){return Ve.call(this)}),{enumerable:!0}),w(n,"toString",(function(){return Ve.call(this)}),{enumerable:!0}),S&&(h=S.createObjectURL,f=S.revokeObjectURL,h&&w(_e,"createObjectURL",(function(e){return h.apply(S,arguments)})),f&&w(_e,"revokeObjectURL",(function(e){return f.apply(S,arguments)}))),V(_e,"URL"),p({global:!0,forced:!b,sham:!v},{URL:_e})},"327b":function(e,t,n){"use strict";n.r(t);var o=n("8bbf"),r=Object(o.withScopeId)("data-v-e8087c8e");Object(o.pushScopeId)("data-v-e8087c8e");var i={class:"toolbar"},a={class:"tools"},l={class:"tool-item"},c={class:"tool-item"},s={class:"tool-item"},u={class:"tool-item"},d={class:"tool-item"},h={class:"tool-item"},f={class:"tool-item"},p={class:"tool-item"},v={class:"popover"},b=Object(o.createVNode)("span",{class:"label"},"宽:",-1),g=Object(o.createVNode)("span",{class:"label"},"高:",-1),m=Object(o.createVNode)("span",{class:"label"},"拖动",-1),w={class:"tool-item"},y={class:"tool-item"},j={class:"popover"},k={class:"tool-item"},O={class:"tool-item"},x={class:"tool-item"},_={class:"tool-item"},V={class:"tool-item"},N={class:"popover"},S={class:"tool-item"},R={class:"tool-item"},C={class:"tool-item"},z=Object(o.createTextVNode)("px"),L=Object(o.createVNode)("h1",null,"视频",-1),U={class:"preview-container"},A={class:"black-hole"},P={id:"crude-player-video",class:"crude-player-video",ref:"crude_player_video",autoplay:""},B={id:"preview-player-video",class:"preview-player-video",ref:"preview_player_video",autoplay:""},E={id:"konva",ref:"preview_player_canvas_box",class:"preview-player-canvas"};Object(o.popScopeId)();var T=r((function(e,t,n,T,q,I){var F=Object(o.resolveComponent)("el-button"),H=Object(o.resolveComponent)("el-tooltip"),M=Object(o.resolveComponent)("el-input"),D=Object(o.resolveComponent)("el-col"),W=Object(o.resolveComponent)("el-switch"),J=Object(o.resolveComponent)("el-row"),$=Object(o.resolveComponent)("el-popover"),X=Object(o.resolveComponent)("el-color-picker"),Z=Object(o.resolveComponent)("el-main");return Object(o.openBlock)(),Object(o.createBlock)(Z,{class:"share"},{default:r((function(){return[Object(o.createVNode)("div",i,[Object(o.createVNode)("div",a,[Object(o.createVNode)("div",l,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"打开预览窗"},{default:r((function(){return[Object(o.createVNode)(F,{disabled:e.button_usable.stop_disabled,onClick:e.handleRequestPIP,size:"small",icon:"iconfont icon-huazhonghua-01"},null,8,["disabled","onClick"])]})),_:1})]),Object(o.createVNode)("div",c,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"重置视频大小"},{default:r((function(){return[Object(o.createVNode)(F,{disabled:e.button_usable.stop_disabled,onClick:e.handleResetVideoSize,size:"small",icon:"iconfont icon-fuwei"},null,8,["disabled","onClick"])]})),_:1})]),Object(o.createVNode)("div",s,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"开始"},{default:r((function(){return[Object(o.createVNode)(F,{disabled:e.button_usable.start_disabled,onClick:e.handleStartCapture,size:"small",icon:"iconfont icon-qidong"},null,8,["disabled","onClick"])]})),_:1})]),Object(o.createVNode)("div",u,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"停止"},{default:r((function(){return[Object(o.createVNode)(F,{disabled:e.button_usable.stop_disabled,onClick:e.handleStotCapture,size:"small",icon:"iconfont icon-stop"},null,8,["disabled","onClick"])]})),_:1})]),Object(o.createVNode)("div",d,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"暂停"},{default:r((function(){return[Object(o.createVNode)(F,{disabled:e.button_usable.pause_disabled,onClick:e.handlePauseRecorderCanvas,size:"small",icon:"iconfont icon-zantingtingzhi"},null,8,["disabled","onClick"])]})),_:1})]),Object(o.createVNode)("div",h,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"继续"},{default:r((function(){return[Object(o.createVNode)(F,{disabled:e.button_usable.resume_disabled,onClick:e.handleResumeRecorderCanvas,size:"small",icon:"iconfont icon-jixu"},null,8,["disabled","onClick"])]})),_:1})]),Object(o.createVNode)("div",f,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"下载"},{default:r((function(){return[Object(o.createVNode)(F,{onClick:e.downloadVideo,size:"small",icon:"iconfont icon-upload-demo"},null,8,["onClick"])]})),_:1})]),Object(o.createVNode)("div",p,[Object(o.createVNode)($,{trigger:"click",placement:"bottom-end",width:"210px"},{reference:r((function(){return[Object(o.createVNode)(F,{size:"small",icon:"iconfont icon-tiaojiedaxiao"})]})),default:r((function(){return[Object(o.createVNode)("div",v,[Object(o.createVNode)(J,null,{default:r((function(){return[Object(o.createVNode)(D,null,{default:r((function(){return[b,Object(o.createVNode)(M,{type:"number",min:"300",modelValue:e.tools.video.width,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tools.video.width=t}),modelModifiers:{number:!0}},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(D,null,{default:r((function(){return[g,Object(o.createVNode)(M,{type:"number",min:"150",modelValue:e.tools.video.height,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.tools.video.height=t}),modelModifiers:{number:!0}},null,8,["modelValue"])]})),_:1}),Object(o.createVNode)(D,null,{default:r((function(){return[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"当锁定时方可使用工具操作"},{default:r((function(){return[Object(o.createVNode)("div",null,[m,Object(o.createVNode)(W,{modelValue:e.tools.video.lock_canvas_size,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.tools.video.lock_canvas_size=t})},null,8,["modelValue"])])]})),_:1})]})),_:1})]})),_:1})])]})),_:1})]),Object(o.createVNode)("div",w,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"画笔"},{default:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-pen",size:"small",class:{active:e.tools.pen},onClick:t[4]||(t[4]=function(t){return e.handleSelectTool("pen")})},null,8,["class"])]})),_:1})]),Object(o.createVNode)("div",y,[Object(o.createVNode)($,{trigger:"click",placement:"bottom-end",width:"210px"},{reference:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-fangxing",size:"small",class:{active:e.tools.shapes.rect||e.tools.shapes.circle||e.tools.shapes.ellipse}},null,8,["class"])]})),default:r((function(){return[Object(o.createVNode)("div",j,[Object(o.createVNode)(F,{icon:"iconfont icon-fangxing",size:"small",class:{active:e.tools.shapes.rect},onClick:t[5]||(t[5]=function(t){return e.handleSelectTool("rect")})},null,8,["class"]),Object(o.createVNode)(F,{icon:"iconfont icon-chevronleftcircle1",size:"small",class:{active:e.tools.shapes.circle},onClick:t[6]||(t[6]=function(t){return e.handleSelectTool("circle")})},null,8,["class"]),Object(o.createVNode)(F,{icon:"iconfont icon-ellipse",size:"small",class:{active:e.tools.shapes.ellipse},onClick:t[7]||(t[7]=function(t){return e.handleSelectTool("ellipse")})},null,8,["class"])])]})),_:1})]),Object(o.createVNode)("div",k,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"线"},{default:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-line",size:"small",class:{active:e.tools.line},onClick:t[8]||(t[8]=function(t){return e.handleSelectTool("line")})},null,8,["class"])]})),_:1})]),Object(o.createVNode)("div",O,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"文字"},{default:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-Text",size:"small",class:{active:e.tools.text},onClick:t[9]||(t[9]=function(t){return e.handleSelectTool("text")})},null,8,["class"])]})),_:1})]),Object(o.createVNode)("div",x,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"模糊"},{default:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-blur",size:"small",class:{active:e.tools.rect_blur},onClick:t[10]||(t[10]=function(t){return e.handleSelectTool("rect_blur")})},null,8,["class"])]})),_:1})]),Object(o.createVNode)("div",_,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"高亮"},{default:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-high-light",size:"small",class:{active:e.tools.highlight},onClick:t[11]||(t[11]=function(t){return e.handleSelectTool("highlight")})},null,8,["class"])]})),_:1})]),Object(o.createVNode)("div",V,[Object(o.createVNode)($,{trigger:"click",placement:"bottom-end",width:"210px"},{reference:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-stickerchajian",size:"small"})]})),default:r((function(){return[Object(o.createVNode)("div",N,[Object(o.createVNode)(F,{icon:"iconfont icon-line-arrow",size:"small",onClick:t[12]||(t[12]=function(t){return e.handleSelectTool("line_arrow")})})])]})),_:1})]),Object(o.createVNode)("div",S,[Object(o.createVNode)(H,{effect:"dark",placement:"bottom-start",content:"自定义贴图"},{default:r((function(){return[Object(o.createVNode)(F,{icon:"iconfont icon-icon-sticker",size:"small"})]})),_:1})]),Object(o.createVNode)("div",R,[Object(o.createVNode)(X,{"show-alpha":!0,"color-format":"rgb",size:"small",modelValue:e.tools.color,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.tools.color=t})},null,8,["modelValue"])]),Object(o.createVNode)("div",C,[Object(o.createVNode)(M,{size:"small",min:"1",type:"number",modelValue:e.tools.size,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.tools.size=t}),modelModifiers:{number:!0}},{append:r((function(){return[z]})),_:1},8,["modelValue"])])])]),L,Object(o.createVNode)("div",U,[Object(o.createVNode)("div",A,[Object(o.createVNode)("video",P,null,512),Object(o.createVNode)("video",B,null,512)]),Object(o.createVNode)("div",E,null,512),Object(o.createVNode)("textarea",{class:"coodoo-doll",style:{width:e.tools.video.width+"px",height:e.tools.video.height+"px",resize:e.tools.video.lock_canvas_size?"none":"both",zIndex:e.tools.video.lock_canvas_size?-99999:3},ref:"coodoo_doll",disabled:""},null,4)]),(Object(o.openBlock)(),Object(o.createBlock)(o.Teleport,{to:"body"},[Object(o.withDirectives)(Object(o.createVNode)("textarea",{class:"tool-textarea",tabindex:"1","onUpdate:modelValue":t[15]||(t[15]=function(t){return e.val=t}),style:e.style,ref:"el"},null,4),[[o.vModelText,e.val]])]))]})),_:1})})),q=n("5530"),I=n("1da1"),F=(n("96cf"),n("ac1f"),n("466d"),n("7db0"),n("159b"),n("cb29"),n("d3b7"),n("25f0"),n("498a"),n("99af"),n("3ca3"),n("ddb0"),n("2b3d"),n("6389")),H=n("92b3"),M=n.n(H),D=n("6ddb"),W=Object(o.defineComponent)({name:"Share",setup:function(){var e=Object(o.ref)(null),t=null,n=Object(o.ref)(null),r=Object(o.ref)(null),i=Object(o.ref)(null),a=Object(o.ref)(null),l=Object(o.reactive)({el:null,val:"",isPaint:!1,style:{top:"0",left:"0",color:"#000",width:"0px",height:"0px",display:"none",fontSize:"32px",fontFamily:"Arial",transform:"rotate(0deg)",lineHeight:"1"}}),c=null,s=null,u=null,d=null,h=null,f=null,p=!1,v=null,b=null,g=null,m=null,w=null,y=null,j=null,k=Object(o.reactive)({video:{width:700,height:400,lock_canvas_size:!0,visible:!1},pen:!1,shapes:{rect:!1,circle:!1,ellipse:!1},line:!1,arrow:{line_arrow:!1,bezier_arrow:!1,big_head_arrow:!1},text:!1,rect_blur:!1,highlight:!1,sticker:{},image:!1,color:"rgba(255,0,0,1)",size:4}),O=Object(o.ref)(null),x=Object(o.reactive)([]),_=Object(o.reactive)({start_disabled:!1,stop_disabled:!0,pause_disabled:!0,resume_disabled:!0}),V=null,N={pen:function(e){(k.pen=e)&&(k.size=4,k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_pen"))},rect:function(e){(k.shapes.rect=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_rect"))},circle:function(e){(k.shapes.circle=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_circle"))},ellipse:function(e){(k.shapes.ellipse=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_ellipse"))},line:function(e){(k.line=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_line"))},line_arrow:function(e){(k.arrow.line_arrow=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_line_arrow"))},bezier_arrow:function(e){(k.arrow.bezier_arrow=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"))},big_head_arrow:function(e){(k.arrow.big_head_arrow=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"))},text:function(e){(k.text=e)&&(k.size=32,k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_text"))},rect_blur:function(e){(k.rect_blur=e)&&(k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"1)"),R("cursor_cert_blur"))},highlight:function(e){(k.highlight=e)&&(k.size=16,k.color="".concat(k.color.match(/[rgba]{3,4}\((\d+,\s*){3}/)[0],"0.6)"),R("cursor_highlight"))}},S=function(e){var t,n;u&&0<u.find(".rect_blur").length&&((t=u.clone()).getChildren().forEach((function(e){e.hasName("rect_blur")&&e.destroy()})),n=t.toCanvas(),e?(e.image(n),e.crop({x:e.x(),y:e.y(),width:e.getWidth(),height:e.getHeight()}),0!==e.width()&&0!=e.height()&&e.cache(),e.filters([M.a.Filters.Blur])):u.find(".rect_blur").forEach((function(e){e.image(n),e.crop({x:e.x(),y:e.y(),width:e.getWidth(),height:e.getHeight()}),0!==e.width()&&0!=e.height()&&e.cache(),e.filters([M.a.Filters.Blur])})))};function R(e){var t=s.container().classList;t.forEach((function(e){/^cursor_/.test(e)&&t.remove(e)})),t.add(e),s.container().className=t.toString()}function C(e,t){var n=s.container().classList;t?n.add(e):n.remove(e),s&&(s.container().className=n.toString())}function z(){s=new M.a.Stage({container:"konva",width:400,height:300}),u=new M.a.Layer,f=new M.a.Animation((function(e){var n;S(),!1===(null===t||void 0===t?void 0:t.active)&&(null!==u&&void 0!==u&&u.destroyChildren(),null!==f&&void 0!==f&&f.stop(),null!==(n=document)&&void 0!==n&&n.exitPictureInPicture(),null!==(n=O.value)&&void 0!==n&&n.stop(),_.start_disabled=!1,_.stop_disabled=!0,_.pause_disabled=!0,_.resume_disabled=!0,J())}),u),n.value=u.canvas._canvas,s.add(u),d=new M.a.Layer,c=new M.a.Transformer({id:"Transformer",anchorStroke:"#fff",anchorFill:"#0081ff",anchorCornerRadius:5,anchorSize:10,keepRatio:!1}),d.add(c),s.add(d),s.draw()}var L=function(e){e.on("mouseenter",(function(){p||(this.draggable(!0),E(!1),C("cursor_move",!0))}))},U=function(e){e.on("mouseleave",(function(){p||(this.draggable(!1),E(!0),C("cursor_move",!1))}))},A=function(e){e.on("click",(function(e){e.cancelBubble=!0,d&&c&&(e=this.clone(),this.hide(),d.add(e),d.add(c),c.setNodes([e]),c.show(),c.moveToTop(),d.draw()),console.log("shpae click")}))};function P(){null!==d&&void 0!==d&&d.getChildren((function(e){return"Transformer"!==e.id()})).forEach((function(e){e.destroy()})),null!==c&&void 0!==c&&c.nodes([]),null!==c&&void 0!==c&&c.hide(),null!==d&&void 0!==d&&d.draw()}function B(){var e,t=null===(e=l.el)||void 0===e?void 0:e.dataset.targetId;if(/text_/.test("".concat(t))&&l.isPaint){if("none"!==l.style.display)return console.log("文本框可见"),l.style.display="none",0===l.val.trim().length?(console.log("无内容 清除"),P(),null!==u&&void 0!==u&&u.getChildren((function(e){return e.id()==="".concat(t)})).forEach((function(e){e.destroy()})),void(!1===(null===c||void 0===c?void 0:c.isVisible())&&setTimeout((function(){l.isPaint=!1,console.log("关闭绘制")})))):(console.log("有文本 隐藏文本框 显示副本"),void(null!==d&&void 0!==d&&d.getChildren((function(e){return e.id()==="".concat(t)})).forEach((function(e){e.x(e.x()+6),e.width(e.width()-12),e.text(l.val),e.show(),null!==c&&void 0!==c&&c.show(),null!==d&&void 0!==d&&d.draw()}))));console.log("文本框不可见 清空副本 显示主体"),function(e,t){var n,o,r,i,a,l,c,s,h,f,p=!(1<arguments.length&&void 0!==t)||t,v=null===u||void 0===u?void 0:u.getChildren((function(t){return t.id()==="".concat(e)}))[0];t=null===d||void 0===d?void 0:d.getChildren((function(t){return t.id()==="".concat(e)}))[0];v&&t&&(console.log(v,t),p?(f=(h=v.getAttrs()).x,n=h.y,o=h.width,r=h.height,i=h.fill,a=h.text,l=h.fontSize,c=h.fontFamily,s=h.lineHeight,h=h.rotation,v.visible(!1),t.setAttrs({x:f,y:n,width:o,height:r,fill:i,text:a,fontSize:l,fontFamily:c,lineHeight:s,rotation:h,visible:!0})):(n=(f=t.getAttrs()).x,o=f.y,r=f.width,i=f.height,a=f.fill,l=f.fontSize,c=f.fontFamily,s=f.lineHeight,h=f.rotation,f=f.text,t.visible(!1),v.setAttrs({x:n,y:o,text:f,width:r,height:i,fill:a,fontSize:l,fontFamily:c,lineHeight:s,rotation:h,visible:!0})),console.log(v,t))}("".concat(t),!1),P(),!1===(null===c||void 0===c?void 0:c.isVisible())&&(l.isPaint=!1,console.log("关闭绘制"))}}function E(e){0<arguments.length&&void 0!==e&&!e?null!==s&&void 0!==s&&s.off("mousedown"):null!==s&&void 0!==s&&s.on("mousedown",(function(){if(console.log("down ****",c&&1===c.nodes().length),!c||1!==c.nodes().length){var e=this.getPointerPosition();switch(!0){case k.pen||k.highlight:p=!0,e&&(v=new M.a.Line({id:Object(D.g)(),stroke:k.color,strokeWidth:k.size,points:[e.x,e.y],strokeScaleEnabled:!1}),L(v),U(v),k.pen?v.globalCompositeOperation("source-over"):k.highlight&&v.globalCompositeOperation("lighten"),null!==u&&void 0!==u&&u.add(v));break;case k.shapes.rect:p=!0,e&&(b=new M.a.Rect({id:Object(D.g)(),x:e.x,y:e.y,width:0,height:0,stroke:k.color,strokeWidth:k.size,strokeScaleEnabled:!1}),L(b),U(b),A(b),null!==u&&void 0!==u&&u.add(b));break;case k.shapes.circle:p=!0,e&&(j={x:e.x,y:e.y,circle:!0},g=new M.a.Circle({id:Object(D.g)(),x:e.x,y:e.y,radius:0,stroke:k.color,strokeWidth:k.size,strokeScaleEnabled:!1}),L(g),U(g),A(g),null!==u&&void 0!==u&&u.add(g));break;case k.shapes.ellipse:p=!0,e&&(j={x:e.x,y:e.y,ellipse:!0},m=new M.a.Ellipse({id:Object(D.g)(),x:e.x,y:e.y,radiusX:0,radiusY:0,stroke:k.color,strokeWidth:k.size,strokeScaleEnabled:!1}),L(m),U(m),A(m),null!==u&&void 0!==u&&u.add(m));break;case k.line:p=!0,e&&(v=new M.a.Line({id:Object(D.g)(),stroke:k.color,strokeWidth:k.size,lineCap:"round",lineJoin:"round",points:[e.x,e.y],strokeScaleEnabled:!1}),L(v),U(v),A(v),null!==u&&void 0!==u&&u.add(v));break;case k.rect_blur:p=!0,e&&i.value&&((y=new M.a.Image({id:Object(D.g)(),image:i.value,x:e.x,y:e.y,width:0,height:0,name:"rect_blur",strokeScaleEnabled:!1,crop:{x:e.x,y:e.y,width:0,height:0}})).on("dragmove",(function(){S(this),null!==u&&void 0!==u&&u.batchDraw()})),L(y),U(y),A(y),null!==u&&void 0!==u&&u.add(y))}}}))}function T(e){var t=e.clone();t.off("click"),t.on("dblclick",(function(){var e,t;this.hide(),null!==c&&void 0!==c&&c.hide(),this.width(this.width()+12),this.x(this.x()-6),e=this,l.el&&s&&((t=l.el).setAttribute("data-target-id",e.id()),l.val=e.text(),l.style={top:document.documentElement.scrollTop+s.container().getBoundingClientRect().y+e.y()+"px",left:s.container().getBoundingClientRect().x+e.x()-6+"px",width:e.width()+"px",height:e.height()+"px",display:"block",color:e.fill(),fontSize:e.fontSize()+"px",fontFamily:e.fontFamily(),transform:"rotateZ(".concat(e.rotation(),"deg)"),lineHeight:"".concat(e.lineHeight())},setTimeout((function(){t.focus()}),500))})),console.log(t),null!==d&&void 0!==d&&d.add(t),null!==c&&void 0!==c&&c.nodes([t]),null!==c&&void 0!==c&&c.resizeEnabled(!1),null!==c&&void 0!==c&&c.show(),e.hide(),t.show(),null!==d&&void 0!==d&&d.draw()}function H(){E(),function(e){0<arguments.length&&void 0!==e&&!e?null!==s&&void 0!==s&&s.off("mousemove"):null!==s&&void 0!==s&&s.on("mousemove",(function(){var e,t,n,o,r,i=s.getPointerPosition();switch(!0){case k.pen||k.highlight:if(!p)return;v&&i&&(r=v.points().concat([i.x,i.y]),null!==v&&void 0!==v&&v.points(r),null!==u&&void 0!==u&&u.batchDraw());break;case k.shapes.rect:if(!p)return;b&&i&&(t=(e=[b.x(),b.y()])[1],b.width(i.x-e[0]),b.height(i.y-t),null!==u&&void 0!==u&&u.batchDraw());break;case k.shapes.circle:if(!p)return;g&&i&&j&&j.circle&&j.x&&j.y&&(n=[j.x,j.y],n=(t=[(i.x+n[0])/2,(i.y+n[1])/2])[1],g.x(t=t[0]),g.y(n),g.radius(Math.sqrt(Math.pow(i.x-t,2)+Math.pow(i.y-n,2))),null!==u&&void 0!==u&&u.batchDraw());break;case k.shapes.ellipse:if(!p)return;m&&i&&j&&j.ellipse&&j.x&&j.y&&(o=(n=[j.x,j.y])[1],m.x((i.x+(n=n[0]))/2),m.y((i.y+o)/2),m.radiusX(Math.abs((i.x-n)/2)),m.radiusY(Math.abs((i.y-o)/2)),null!==u&&void 0!==u&&u.batchDraw());break;case k.line:if(!p)return;v&&i&&(r=[v.points()[0],v.points()[1],i.x,i.y],null!==v&&void 0!==v&&v.points(r),null!==u&&void 0!==u&&u.batchDraw());break;case k.rect_blur:if(!p)return;y&&i&&(r=(o=[y.x(),y.y()])[1],y.width(i.x-(o=o[0])),y.height(i.y-r),y.cropWidth(i.x-o),y.cropHeight(i.y-r),y.blurRadius(20),0!==y.width()&&0!=y.height()&&y.cache(),y.filters([M.a.Filters.Blur]),null!==u&&void 0!==u&&u.batchDraw())}}))}(),function e(t){0<arguments.length&&void 0!==t&&!t?null!=s&&s.off("mouseup"):null!=s&&s.on("mouseup",(function(t){var n=this.getPointerPosition();switch(!0){case k.pen:case k.highlight:case k.shapes.rect:case k.shapes.circle:case k.shapes.ellipse:case k.line:case k.rect_blur:p=!1,j=null;break;case k.text:B(),n&&!l.isPaint&&(console.log("文本开启 绘制 "),l.isPaint=!0,(w=new M.a.Text({id:"text_".concat(Object(D.g)()),text:"",x:n.x,y:n.y,width:k.size,height:k.size,draggable:!0,fill:k.color,fontSize:k.size,strokeScaleEnabled:!1,visible:!1})).on("mouseenter",(function(){e(!1),E(!1),C("cursor_move",!0)})),w.on("mouseleave",(function(){e(!0),E(!0),C("cursor_move",!1)})),T(w),null!=c&&c.hide(),w.on("click",(function(e){console.log("点击我了",e.target),k.text&&T(this)})),null!=d&&d.getChildren((function(e){return e.id()===(null==w?void 0:w.id())})).forEach((function(e){e.fire("dblclick")})),null!=u&&u.add(w))}}))}()}var W=function(){var e=Object(I.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pictureInPictureEnabled"in document){e.next=2;break}return e.abrupt("return",!1);case 2:if(i.value)return t=i.value,e.prev=4,e.next=7,t.requestPictureInPicture();e.next=13;break;case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();function J(){e.value&&(e.value.style.width="auto",e.value.style.height="auto",k.video.width=e.value.offsetWidth,k.video.height=e.value.offsetHeight)}function $(){e.value&&n.value&&function(t){if(u&&e.value){var n=e.value,o=n.offsetWidth,r=n.offsetHeight;n=[u.width(),u.height()];h=new M.a.Image({image:t,x:(n[0]-o)/2,y:(n[1]-r)/2,width:o,height:r,name:"video_shape"}),u.add(h),null!==f&&void 0!==f&&f.start()}}(e.value)}function X(){var e;a.value&&(a.value.style.width=(k.video.width||(null===u||void 0===u?void 0:u.width()))+"px",a.value.style.height=(k.video.height||(null===u||void 0===u?void 0:u.height()))+"px",a.value.style.left=(null===(e=r.value)||void 0===e?void 0:e.offsetLeft)+"px",a.value.style.top=(null===(e=r.value)||void 0===e?void 0:e.offsetTop)+"px")}var Z=function(){var o=Object(I.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1});case 3:t=o.sent,e.value&&(e.value.srcObject=t,_.start_disabled=!0,_.stop_disabled=!1,$(),r=void 0,(r=null===(r=n.value)||void 0===r?void 0:r.captureStream(60))?(O.value=new window.MediaRecorder(r,{mimeType:"video/webm; codecs=vp9",videoBitsPerSecond:85e5}),i.value&&(i.value.srcObject=r),x.forEach((function(){x.shift()})),O.value.ondataavailable=function(e){x.push(e.data)},O.value.start(100)):console.log("浏览器不支持 captureStream"),_.pause_disabled=!1,_.resume_disabled=!0),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),console.log(o.t0);case 10:case"end":return o.stop()}var r}),o,null,[[0,7]])})));return function(){return o.apply(this,arguments)}}();Object(o.watch)((function(){return l.val}),(function(e){if(console.log(e,d),!k.text||!c)return!1;var t=c.nodes()[0];t&&(t.text(l.val),0!==e.length?t.setSize({width:"auto",height:"auto"}):t.setSize({width:t.fontSize()-12,height:t.fontSize()}),l.style.width=t.width()+"px",l.style.height=t.height()+"px",t.width(t.width()+12),l.style.top=document.documentElement.scrollTop+s.container().getBoundingClientRect().y+t.y()+"px")}));var Y=new window.ResizeObserver((function(t){var n,o;t=t[0];s&&e.value&&(s.width(t.borderBoxSize[0].inlineSize),s.height(t.borderBoxSize[0].blockSize),t=[s.width(),s.height()],n=t[0],o=t[1],s.getChildren().forEach((function(e){e.canvas._canvas.width=n,e.canvas._canvas.height=o})),k.video.width=n,k.video.height=o,(t=e.value).style.width="".concat(n,"px"),t.style.height="auto",t.offsetHeight>o?(t.style.width="auto",t.style.height="".concat(o,"px"),null!==h&&void 0!==h&&h.width(t.offsetWidth),null!==h&&void 0!==h&&h.height(o)):(t.style.width="".concat(n,"px"),t.style.height="auto",null!==h&&void 0!==h&&h.width(n),null!==h&&void 0!==h&&h.height(t.offsetHeight)),null!==h&&void 0!==h&&h.x((n-t.offsetWidth)/2),null!==h&&void 0!==h&&h.y((o-t.offsetHeight)/2))}));return Object(o.onMounted)((function(){z(),H(),V=setInterval(X,16),a.value&&Y.observe(a.value)})),Object(o.onUnmounted)((function(){clearInterval(V),a.value&&Y.unobserve(a.value)})),Object(F.onBeforeRouteLeave)(Object(I.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.confirm("确认离开吗？(正在录制的视频会丢失)"));case 1:case"end":return e.stop()}}),e)})))),Object(q.a)(Object(q.a)({preview_player_canvas_box:r,preview_player_canvas:n,crude_player_video:e,preview_player_video:i,coodoo_doll:a},Object(o.toRefs)(l)),{},{button_usable:_,tools:k,allChunks:x,downloadVideo:function(){Object(D.a)(window.URL.createObjectURL(new Blob(x,{type:"video/webm"})),"video.webm")},handleRequestPIP:W,handleStartCapture:Z,handleStotCapture:function(){var t;e.value&&(null!=(t=e.value.srcObject.getTracks())&&t.forEach((function(e){return e.stop()})),e.value.srcObject=null)},handlePauseRecorderCanvas:function(){var e;null!==(e=O.value)&&void 0!==e&&e.pause(),_.pause_disabled=!0,_.resume_disabled=!1},handleResumeRecorderCanvas:function(){var e;null!==(e=O.value)&&void 0!==e&&e.resume(),_.pause_disabled=!1,_.resume_disabled=!0},handleResetVideoSize:J,handleSelectTool:function(e){for(var t in p=!1,N)Object.prototype.hasOwnProperty.call(N,t)&&(t!==e?N[t](!1):N[t](!0))}})}});n("50b6"),H=n("6b0d"),H=n.n(H);t.default=H()(W,[["render",T],["__scopeId","data-v-e8087c8e"]])},"466d":function(e,t,n){"use strict";var o=n("d784"),r=n("825a"),i=n("50c4"),a=n("1d80"),l=n("8aa5"),c=n("14c3");o("match",1,(function(e,t,n){return[function(t){var n=a(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](String(n))},function(e){var o=n(t,e,this);if(o.done)return o.value;var a=r(e),s=String(this);if(!a.global)return c(a,s);for(var u=a.unicode,d=[],h=a.lastIndex=0;null!==(f=c(a,s));){var f=String(f[0]);""===(d[h]=f)&&(a.lastIndex=l(s,i(a.lastIndex),u)),h++}return 0===h?null:d}]}))},"50b6":function(e,t,n){"use strict";n("25ac")},"5fb2":function(e,t,n){"use strict";function o(e){return e+22+75*(e<26)}function r(e){var t,n=[],r=(e=function(e){for(var t=[],n=0,o=e.length;n<o;){var r,i=e.charCodeAt(n++);55296<=i&&i<=56319&&n<o?56320==(64512&(r=e.charCodeAt(n++)))?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--):t.push(i)}return t}(e)).length,a=128,l=0,d=72;for(v=0;v<e.length;v++)(t=e[v])<128&&n.push(u(t));var h=n.length,f=h;for(h&&n.push("-");f<r;){for(var p=i,v=0;v<e.length;v++)a<=(t=e[v])&&t<p&&(p=t);var b=f+1;if(p-a>s((i-l)/b))throw RangeError(c);for(l+=(p-a)*b,a=p,v=0;v<e.length;v++){if((t=e[v])<a&&++l>i)throw RangeError(c);if(t==a){for(var g=l,m=36;;m+=36){var w=m<=d?1:d+26<=m?26:m-d;if(g<w)break;var y=g-w,j=36-w;n.push(u(o(w+y%j))),g=s(y/j)}n.push(u(o(g))),d=function(e,t,n){var o=0;for(e=n?s(e/700):e>>1,e+=s(e/t);455<e;o+=36)e=s(e/35);return s(o+36*e/(e+38))}(l,b,f==h),l=0,++f}}++l,++a}return n.join("")}var i=2147483647,a=/[^\0-\u007E]/,l=/[.\u3002\uFF0E\uFF61]/g,c="Overflow: input needs wider integers to process",s=Math.floor,u=String.fromCharCode;e.exports=function(e){for(var t,n=[],o=e.toLowerCase().replace(l,".").split("."),i=0;i<o.length;i++)t=o[i],n.push(a.test(t)?"xn--"+r(t):t);return n.join(".")}},"7db0":function(e,t,n){"use strict";var o=n("23e7"),r=n("b727").find,i=n("44d2"),a=(n="find",!0);n in[]&&Array(1)[n]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),i(n)},"81d5":function(e,t,n){"use strict";var o=n("7b0b"),r=n("23cb"),i=n("50c4");e.exports=function(e){for(var t=o(this),n=i(t.length),a=arguments.length,l=r(1<a?arguments[1]:void 0,n),c=(a=2<a?arguments[2]:void 0,void 0===a?n:r(a,n));l<c;)t[l++]=e;return t}},9861:function(e,t,n){"use strict";function o(t){try{return decodeURIComponent(t)}catch(e){return t}}function r(e){var t,n=e.replace(P," "),r=4;try{return decodeURIComponent(n)}catch(e){for(;r;)n=n.replace((t=r--,B[t-1]||(B[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),o);return n}}function i(e){return T[e]}function a(e){return encodeURIComponent(e).replace(E,i)}function l(e,t){if(t)for(var n,o=t.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(n=n.split("="),e.push({key:r(n.shift()),value:r(n.join("="))}))}function c(e){this.entries.length=0,l(this.entries,e)}function s(e,t){if(e<t)throw TypeError("Not enough arguments")}n("e260");var u=n("23e7"),d=n("d066"),h=n("0d3b"),f=n("6eeb"),p=n("e2cc"),v=n("d44e"),b=n("9ed3"),g=n("69f3"),m=n("19aa"),w=n("5135"),y=n("0366"),j=n("f5df"),k=n("825a"),O=n("861d"),x=n("7c73"),_=n("5c6c"),V=n("9a1f"),N=n("35a1"),S=(n=n("b622"),d("fetch")),R=d("Headers"),C=(n=n("iterator"),"URLSearchParams"),z=C+"Iterator",L=g.set,U=g.getterFor(C),A=g.getterFor(z),P=/\+/g,B=Array(4),E=/[!'()~]|%20/g,T={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},q=b((function(e,t){L(this,{type:z,iterator:V(U(e).entries),kind:t})}),"Iterator",(function(){var e=A(this),t=e.kind,n=e.iterator.next();e=n.value;return n.done||(n.value="keys"===t?e.key:"values"===t?e.value:[e.key,e.value]),n})),I=function(){m(this,I,C);var e,t,n,o,r,i,a,s,u=0<arguments.length?arguments[0]:void 0,d=[];if(L(this,{type:C,entries:d,updateURL:function(){},updateSearchParams:c}),void 0!==u)if(O(u))if("function"==typeof(e=N(u)))for(n=(t=e.call(u)).next;!(i=n.call(t)).done;){if((i=(r=(o=V(k(i.value))).next).call(o)).done||(a=r.call(o)).done||!r.call(o).done)throw TypeError("Expected sequence with length 2");d.push({key:i.value+"",value:a.value+""})}else for(s in u)w(u,s)&&d.push({key:s,value:u[s]+""});else l(d,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")};b=I.prototype;p(b,{append:function(e,t){s(arguments.length,2);var n=U(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){s(arguments.length,1);for(var t=U(this),n=t.entries,o=e+"",r=0;r<n.length;)n[r].key===o?n.splice(r,1):r++;t.updateURL()},get:function(e){s(arguments.length,1);for(var t=U(this).entries,n=e+"",o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){s(arguments.length,1);for(var t=U(this).entries,n=e+"",o=[],r=0;r<t.length;r++)t[r].key===n&&o.push(t[r].value);return o},has:function(e){s(arguments.length,1);for(var t=U(this).entries,n=e+"",o=0;o<t.length;)if(t[o++].key===n)return!0;return!1},set:function(e,t){s(arguments.length,1);for(var n,o=U(this),r=o.entries,i=!1,a=e+"",l=t+"",c=0;c<r.length;c++)(n=r[c]).key===a&&(i?r.splice(c--,1):(i=!0,n.value=l));i||r.push({key:a,value:l}),o.updateURL()},sort:function(){for(var e,t,n=U(this),o=n.entries,r=o.slice(),i=o.length=0;i<r.length;i++){for(e=r[i],t=0;t<i;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===i&&o.push(e)}n.updateURL()},forEach:function(e){for(var t,n=U(this).entries,o=y(e,1<arguments.length?arguments[1]:void 0,3),r=0;r<n.length;)o((t=n[r++]).value,t.key,this)},keys:function(){return new q(this,"keys")},values:function(){return new q(this,"values")},entries:function(){return new q(this,"entries")}},{enumerable:!0}),f(b,n,b.entries),f(b,"toString",(function(){for(var e,t=U(this).entries,n=[],o=0;o<t.length;)e=t[o++],n.push(a(e.key)+"="+a(e.value));return n.join("&")}),{enumerable:!0}),v(I,C),u({global:!0,forced:!h},{URLSearchParams:I}),h||"function"!=typeof S||"function"!=typeof R||u({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,o=[e];return 1<arguments.length&&(O(t=arguments[1])&&(n=t.body,j(n)===C&&((e=t.headers?new R(t.headers):new R).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=x(t,{body:_(0,String(n)),headers:_(0,e)}))),o.push(t)),S.apply(this,o)}}),e.exports={URLSearchParams:I,getState:U}},"9a1f":function(e,t,n){var o=n("825a"),r=n("35a1");e.exports=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return o(t.call(e))}},cb29:function(e,t,n){var o=n("23e7"),r=n("81d5");n=n("44d2");o({target:"Array",proto:!0},{fill:r}),n("fill")}}]);